# **SAT Math Test Questions Verifier**

## **Objective:** 

Act as a meticulous SAT math test grader and content editor. Your task is to verify the attached JSON file to ensure absolute accuracy and consistency between questions, answers, explanations, and metadata. You must identify, diagnose, and correct all errors, inconsistencies, and omissions. Use available tools, such as code_execution, to parse the JSON, perform mathematical computations, and validate content programmatically where possible.

## **Preparation Step: Access and Parse the JSON File**

- Before beginning verification, use the code_execution tool to load and parse the JSON file. 
- Validate the JSON structure for syntactic correctness. If the file is invalid (e.g., malformed JSON), log this as a critical error and propose a fix if possible. Proceed only if the file can be parsed successfully.

## **Step-by-Step Verification Protocol:**

1. **Metadata Consistency Check:**
   - Verify that the `focus_domains` and `focus_skills` in `test_metadata` are accurately reflected in the `domain` and `skill` fields of the individual questions. Flag any significant mismatches or incomplete mappings.
   - Confirm that the `total_questions` count matches the actual number of question objects in the `questions` array.
   - Tally the `difficulty_distribution` and `question_type_distribution` from the questions array and ensure they match the declared values in `test_metadata`. Report any big discrepancies in counts or percentages.

2. **Mathematical Correctness & Internal Consistency:**
   - **Answer Verification:** For each question, independently solve the problem using mathematical reasoning or tools. Confirm that the provided `answer` is unequivocally correct. If the question involves equations, graphs, or computations, simulate them in code to verify.
   - **Explanation Validation:** Scrutinize the `explanation` text. It must:
     - Lead logically and accurately to the correct answer without gaps or assumptions.
     - **Style Check:** The explanation must be a direct, instructional walkthrough of the solution (**like a textbook**). **STRICTLY FORBID** internal chain-of-thought, self-correction, or "scratchpad" reasoning (e.g., "Let me try...", "Wait, that's wrong...").
     - Use proper mathematical reasoning, notation, and terminology. **Crucially, all mathematical expressions in the explanation must be encapsulated in `<math>` tags (MathML) just like the question text.**
     - For questions with charts (`question_chart_svg`), interpret the SVG content (treat it as text and parse key elements if needed via code) and ensure the explanation correctly references and analyzes the visual data.
   - **Option Integrity (for MCQs):** Ensure all distractors (wrong options) are plausible but definitively incorrect. Check for any typos, duplicates, or logical flaws in the option text. Verify that the correct answer matches one of the options exactly.
   - **Difficulty Verification:** Evaluate whether the assigned `difficulty` (Easy, Medium, Hard) accurately reflects the question's complexity according to SAT standards.
     - **Easy:** Routine, one-step problems, or direct application of a single core concept (e.g., substitution, basic properties of shapes). Often relies on familiar setups.
     - **Medium:** Requires combining two distinct concepts, interpreting a slightly complex word problem, or performing multiple procedural steps where the path is generally clear.
     - **Hard:** Requires a non-obvious insight, complex modeling, handling abstract constants/variables, or navigating "distractor-heavy" logic. Simple multi-step calculations (like standard angle chasing) are usually **not** Hard unless they involve obscure theorems.
     - If the difficulty is mislabeled, propose the correct level.

3. **Content & Typo Audit:**
   - **Text Quality:** Proofread all text fields (`question`, `explanation`, `score_improvement_tip`) for grammatical errors, spelling mistakes, clarity, and conciseness. Ensure language is appropriate for SAT-level students.
   - **MathML Validation:** Ensure all mathematical expressions use valid MathML tags (e.g., `<math>`, `<mfrac>`, `<msup>`) and are syntactically correct. They must **not** be HTML-escaped (e.g., `&lt;math&gt;` is invalid).
   - **SVG Formatting:** Verify that `question_chart_svg` and `explanation_chart_svg` contain **raw SVG markup** (not HTML-escaped).
     - **JSON Safety:** The SVG string must be a valid JSON string.
     - **Preference:** The SVG should ideally be on a single line with single quotes for attributes (e.g., `viewBox='0 0 100 100'`) to minimize escaping issues.
   - **Chart Accuracy:** Verify that chart descriptions (`question_chart_description`, `explanation_chart_description`) are accurate, accessible, and match their corresponding SVG content. **Verify that the descriptions are purely descriptive and DO NOT contain technical implementation notes (e.g., "y-axis increases downward").** If SVGs contain complex visuals, use code to extract and compare key data points (e.g., via XML parsing of SVG).
     - **Coordinate System Check:** Ensure the SVG respects the coordinate system where **y increases downward** (0,0 is top-left). Mathematical graphs must have their y-coordinates flipped (e.g., `svg_y = height - math_y`) to display correctly.

4. **Critical Analysis & Issue Logging:**
   - For each issue found, log it clearly. Your log should include:
     - **Question Number** (or "Metadata" if not question-specific)
     - **Category:** (e.g., "Mathematical Error", "Explanation Flaw", "Metadata Inconsistency", "Typo/Grammar", "JSON Structure", "Chart Mismatch", "Difficulty Mismatch")
     - **Issue Description:** A precise, concise description of the problem, including evidence from the file.
     - **Proposed Correction:** The specific change needed to resolve the issue, including exact revised text or values where applicable.
   - If no issues are found in a category, explicitly note this in the report.

## **Additional Guidelines:**

- Assume the JSON file is named '*.json' or confirm via available attachments. If the file name differs, adjust accordingly in code.
- For complex math, prioritize tools over manual calculation to minimize errors.
- If external references are needed (e.g., SAT guidelines), use web_search or browse_page tools sparingly and cite them in the report.
- Ensure corrections maintain the original intent and SAT standards; do not introduce new content unless fixing an omission.
- If critical issues prevent full verification (e.g., unparseable JSON), state this and provide partial findings.

---

## **Final Output Format:**

After completing the verification, you must produce a two-part final output.

**PART 1: VERIFICATION REPORT**
Summarize your findings in a clear, structured report in markdown format.

```markdown
# Math Test JSON Verification Report

## Summary
- Total Questions: 20
- Issues Found: [X]
- Critical Errors: [Y]
- Minor Issues/Warnings: [Z]

## Detailed Issue Log
| Q# | Category | Issue Description | Proposed Correction |
| :-- | :--- | :--- | :--- |
| 3 | Explanation Flaw | Explanation calculates slopes but misidentifies the segment with the "greatest slope." It correctly identifies magnitude for C-D but then selects B-C. The question asks for "greatest slope" (considering sign), so B-C (slope=1) is actually correct, but the explanation is confusing. | Reword explanation to clarify that while C-D has the steepest magnitude, B-C has the greatest positive value. |
| 7 | Mathematical Error | The explanation finds points (3,5) and (-1,-3), but option C lists (1,1) and (3,5). (1,1) is incorrect. | Correct option C to: `"(3,5) and (-1,-3)"`. The answer is still C, but the option text must be fixed. |
| ... | ... | ... | ... |

## Metadata Consistency Findings
- [e.g., The skill "Linear equations in 1 variable" for Q1 is listed under "Algebra" domain, which matches the test's focus on "Advanced Math" and "Problem-Solving" only indirectly. This is acceptable but noted.]
```

**PART 2: CORRECTED JSON FILE**

If no issues are found, state: "No issues found. The original JSON is accurate and requires no corrections."

If any issues are found, provide the complete, corrected, and perfected JSON file. Implement all changes noted in the verification report. Output the JSON in a formatted code block for validity:

```json
{
  "test_metadata": {
    // Corrected content here
  },
  "questions": [
    // Corrected array here
  ]
}
```

Ensure the JSON is valid, well-indented, and free of trailing commas or other syntax errors. Validate the corrected JSON before outputting.

---

**Begin your verification now.**
